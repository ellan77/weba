{"ast":null,"code":"var _jsxFileName = \"/home/dmitry/Projects/weba/hw3/src/components/App/App.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { setToLocalStorage, getFromLocalStorage } from \"../../utils\";\nexport const App = () => {\n  const TOKEN_STORAGE_KEY = \"TOKEN\";\n  const key = \"82eb7c7eb6b385e06a18315ae9f5fbf5\";\n  const redirectUrl = \"http://localhost:3000\";\n  const scope = \"read\";\n  const appName = \"TrelloAppReact\";\n  const reqUrl = `https://trello.com/1/authorize?expiration=1day&name=${appName}&scope=${scope}&response_type=token&key=${key}&return_url=${redirectUrl}`;\n  let [token, setToken] = useState(\"\");\n\n  const removeToken = () => {\n    setToken(\"\");\n    setToLocalStorage(TOKEN_STORAGE_KEY, \"\");\n  };\n\n  useEffect(() => {\n    const tokenUrl = window.location.hash.split(\"=\")[1];\n\n    if (tokenUrl) {\n      setToken(tokenUrl);\n      setToLocalStorage(TOKEN_STORAGE_KEY, tokenUrl);\n      console.log(\"if\");\n    } else {\n      const localToken = getFromLocalStorage(TOKEN_STORAGE_KEY);\n      setToken(localToken);\n      console.log(localToken);\n      console.log(\"else\");\n    } // if (!tokenUrl) {\n    //   const localToken: any = getFromLocalStorage(TOKEN_STORAGE_KEY);\n    //   console.log(localToken);\n    //   setToken(localToken);\n    // }\n\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, !token && React.createElement(\"a\", {\n    href: reqUrl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Create Trello Token\"), token && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, token), React.createElement(\"a\", {\n    onClick: removeToken,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"You can remove token with this button\")));\n};","map":{"version":3,"sources":["/home/dmitry/Projects/weba/hw3/src/components/App/App.tsx"],"names":["React","useState","useEffect","setToLocalStorage","getFromLocalStorage","App","TOKEN_STORAGE_KEY","key","redirectUrl","scope","appName","reqUrl","token","setToken","removeToken","tokenUrl","window","location","hash","split","console","log","localToken"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,iBAAT,EAA4BC,mBAA5B,QAAuD,aAAvD;AAEA,OAAO,MAAMC,GAAG,GAAG,MAAM;AACvB,QAAMC,iBAAyB,GAAG,OAAlC;AACA,QAAMC,GAAW,GAAG,kCAApB;AACA,QAAMC,WAAmB,GAAG,uBAA5B;AACA,QAAMC,KAAa,GAAG,MAAtB;AACA,QAAMC,OAAe,GAAG,gBAAxB;AACA,QAAMC,MAAc,GAAI,uDAAsDD,OAAQ,UAASD,KAAM,4BAA2BF,GAAI,eAAcC,WAAY,EAA9J;AAEA,MAAI,CAACI,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAhC;;AAEA,QAAMa,WAAW,GAAG,MAAM;AACxBD,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAV,IAAAA,iBAAiB,CAACG,iBAAD,EAAoB,EAApB,CAAjB;AACD,GAHD;;AAKAJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,QAAgB,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAAzB;;AACA,QAAIJ,QAAJ,EAAc;AACZF,MAAAA,QAAQ,CAACE,QAAD,CAAR;AACAZ,MAAAA,iBAAiB,CAACG,iBAAD,EAAoBS,QAApB,CAAjB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,KAJD,MAIO;AACL,YAAMC,UAAe,GAAGlB,mBAAmB,CAACE,iBAAD,CAA3C;AACAO,MAAAA,QAAQ,CAACS,UAAD,CAAR;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYC,UAAZ;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD,KAXa,CAad;AACA;AACA;AACA;AACA;;AACD,GAlBQ,EAkBN,EAlBM,CAAT;AAoBA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACT,KAAD,IAAU;AAAG,IAAA,IAAI,EAAED,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADb,EAEGC,KAAK,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,KAAJ,CADF,EAEE;AAAG,IAAA,OAAO,EAAEE,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAFF,CAHJ,CADF;AAWD,CA9CM","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { setToLocalStorage, getFromLocalStorage } from \"../../utils\";\n\nexport const App = () => {\n  const TOKEN_STORAGE_KEY: string = \"TOKEN\";\n  const key: string = \"82eb7c7eb6b385e06a18315ae9f5fbf5\";\n  const redirectUrl: string = \"http://localhost:3000\";\n  const scope: string = \"read\";\n  const appName: string = \"TrelloAppReact\";\n  const reqUrl: string = `https://trello.com/1/authorize?expiration=1day&name=${appName}&scope=${scope}&response_type=token&key=${key}&return_url=${redirectUrl}`;\n\n  let [token, setToken] = useState(\"\");\n\n  const removeToken = () => {\n    setToken(\"\");\n    setToLocalStorage(TOKEN_STORAGE_KEY, \"\");\n  };\n\n  useEffect(() => {\n    const tokenUrl: string = window.location.hash.split(\"=\")[1];\n    if (tokenUrl) {\n      setToken(tokenUrl);\n      setToLocalStorage(TOKEN_STORAGE_KEY, tokenUrl);\n      console.log(\"if\");\n    } else {\n      const localToken: any = getFromLocalStorage(TOKEN_STORAGE_KEY);\n      setToken(localToken);\n      console.log(localToken);\n      console.log(\"else\");\n    }\n\n    // if (!tokenUrl) {\n    //   const localToken: any = getFromLocalStorage(TOKEN_STORAGE_KEY);\n    //   console.log(localToken);\n    //   setToken(localToken);\n    // }\n  }, []);\n\n  return (\n    <div>\n      {!token && <a href={reqUrl}>Create Trello Token</a>}\n      {token && (\n        <div>\n          <p>{token}</p>\n          <a onClick={removeToken}>You can remove token with this button</a>\n        </div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}